{"name": "test_[登录成功]", "status": "failed", "statusDetails": {"message": "AssertionError", "trace": "self = <core.case.create_case.<locals>.Test object at 0x000002577F4D52A0>\ncase = ('登录成功', [[1, '以未登录状态访问页面', 'driver_fixture', 'driver'], [1, '访问 登录页面', 'get_url', 'http://101.34.221.219:8010/?s=user...]/div/div[2]/div[2]/div/div/div[1]/form/div[3]/button'], [5, '断言', 'assert_text', '//p[@class=\"prompt-msg\"]', '登录成功']])\n\n    @pytest.mark.parametrize('case', case_dict.items(), ids=case_dict.keys())\n    def test_(self, case):\n        name = case[0]  # 用例名称\n        step_list = case[1]  # 用例步骤\n        # print(f'{name=}')\n        # print(f'{step_list=}')\n    \n        kw = KeyWord(request=self.request)  # 不传递driver, 传递pytest\n        for step in step_list:\n            key = step[2]  # 关键字\n            args = step[3:]  # 关键字参数\n            # print(f'{key=}')\n            # print(f'{args=}')\n            f = kw.get_kw_method(key)\n            try:\n                with allure.step(step[1]):\n                    f(*args)  # 调用关键字方法\n            except Exception as e:\n                logger.error('关键字调用出错', exc_info=True)\n>               raise e\n\ncore\\case.py:45: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\ncore\\case.py:42: in test_\n    f(*args)  # 调用关键字方法\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <core.kdt.KeyWord object at 0x000002577F5020E0>\nloc = '//p[@class=\"prompt-msg\"]', text = '登录成功'\n\n    @allure.step('断言文本内容')\n    def key_assert_text(self, loc, text):\n        el = self.find_element(By.XPATH, loc)\n        self.wait.until(lambda _: el.is_enabled())\n        el_text = el.text.strip()  # 去除两边的空格\n        logger.info(f'元素的文本是{el_text}')\n        text = text.strip()  # 去除两边空格\n        logger.info(f'预期的文本是{text}')\n>       assert text == el_text\nE       AssertionError\n\ncore\\kdt.py:85: AssertionError"}, "steps": [{"name": "以未登录状态访问页面", "status": "passed", "start": 1663216613033, "stop": 1663216613035}, {"name": "访问 登录页面", "status": "passed", "start": 1663216613216, "stop": 1663216614349}, {"name": "输入 用户名", "status": "passed", "steps": [{"name": "定位元素", "status": "passed", "parameters": [{"name": "args", "value": "('xpath', '/html/body/div[4]/div/div[2]/div[2]/div/div/div[1]/form/div[1]/input')"}], "start": 1663216614505, "stop": 1663216614513}], "start": 1663216614505, "stop": 1663216614591}, {"name": "输入 密码", "status": "passed", "steps": [{"name": "定位元素", "status": "passed", "parameters": [{"name": "args", "value": "('xpath', '/html/body/div[4]/div/div[2]/div[2]/div/div/div[1]/form/div[2]/div/input')"}], "start": 1663216614740, "stop": 1663216614746}], "start": 1663216614738, "stop": 1663216614823}, {"name": "点击 登录", "status": "passed", "steps": [{"name": "定位元素", "status": "passed", "parameters": [{"name": "args", "value": "('xpath', '/html/body/div[4]/div/div[2]/div[2]/div/div/div[1]/form/div[3]/button')"}], "start": 1663216615005, "stop": 1663216615011}], "start": 1663216615005, "stop": 1663216615056}, {"name": "断言", "status": "failed", "statusDetails": {"message": "AssertionError\n", "trace": "  File \"D:\\workspace\\mashang_project\\web_ui_three\\core\\case.py\", line 42, in test_\n    f(*args)  # 调用关键字方法\n  File \"D:\\workspace\\mashang_project\\web_ui_three\\venv\\lib\\site-packages\\allure_commons\\_allure.py\", line 172, in impl\n    return func(*a, **kw)\n  File \"D:\\workspace\\mashang_project\\web_ui_three\\core\\kdt.py\", line 85, in key_assert_text\n    assert text == el_text\n"}, "steps": [{"name": "断言文本内容", "status": "failed", "statusDetails": {"message": "AssertionError\n", "trace": "  File \"D:\\workspace\\mashang_project\\web_ui_three\\venv\\lib\\site-packages\\allure_commons\\_allure.py\", line 172, in impl\n    return func(*a, **kw)\n  File \"D:\\workspace\\mashang_project\\web_ui_three\\core\\kdt.py\", line 85, in key_assert_text\n    assert text == el_text\n"}, "steps": [{"name": "定位元素", "status": "passed", "parameters": [{"name": "args", "value": "('xpath', '//p[@class=\"prompt-msg\"]')"}], "start": 1663216615214, "stop": 1663216615222}], "parameters": [{"name": "loc", "value": "'//p[@class=\"prompt-msg\"]'"}, {"name": "text", "value": "'登录成功'"}], "start": 1663216615214, "stop": 1663216615238}], "start": 1663216615214, "stop": 1663216615238}], "attachments": [{"name": "以未登录状态访问页面", "source": "7f36d84b-c44c-4df8-be15-7920ac7d309e-attachment.png", "type": "image/png"}, {"name": "访问 登录页面", "source": "380283b9-1731-4d6a-9b73-d435fe65df2f-attachment.png", "type": "image/png"}, {"name": "输入 用户名", "source": "ef8a4d53-112c-4281-9b21-1e700d584981-attachment.png", "type": "image/png"}, {"name": "输入 密码", "source": "e93dcb82-4d2d-46f3-a831-9ff017cc0f0d-attachment.png", "type": "image/png"}, {"name": "点击 登录", "source": "f629ad62-92ad-49d3-a420-7c4234a1a104-attachment.png", "type": "image/png"}, {"name": "断言", "source": "1bd0d2ad-0c7c-405e-981e-9f6bd748e227-attachment.png", "type": "image/png"}, {"name": "log", "source": "00308e01-2200-450c-bef6-449a19eadfc1-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "case", "value": "('登录成功', [[1, '以未登录状态访问页面', 'driver_fixture', 'driver'], [1, '访问 登录页面', 'get_url', 'http://101.34.221.219:8010/?s=user/loginInfo.html'], [2, '输入 用户名', 'input', '/html/body/div[4]/div/div[2]/div[2]/div/div/div[1]/form/div[1]/input', 'test101'], [3, '输入 密码', 'input', '/html/body/div[4]/div/div[2]/div[2]/div/div/div[1]/form/div[2]/div/input', 1123456], [4, '点击 登录', 'click', '/html/body/div[4]/div/div[2]/div[2]/div/div/div[1]/form/div[3]/button'], [5, '断言', 'assert_text', '//p[@class=\"prompt-msg\"]', '登录成功']])"}], "start": 1663216613033, "stop": 1663216615408, "uuid": "4a7539a8-cbf2-463f-8bf4-6f3ea1a7a037", "historyId": "877dac8a7f50e35b76f05dac62ca52b4", "testCaseId": "8d8030a5ad813c8f7d28fa3617f8e886", "fullName": "testcases.test_excel.Test_1_登录#test_", "labels": [{"name": "suite", "value": "test_excel.xlsx"}, {"name": "parentSuite", "value": "testcases"}, {"name": "subSuite", "value": "Test_1_登录"}, {"name": "host", "value": "DESKTOP-444O98D"}, {"name": "thread", "value": "18152-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "testcases.test_excel"}]}